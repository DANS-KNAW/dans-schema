<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="None" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>dans-schema</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Manual";
        var mkdocs_page_input_path = "index.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> dans-schema
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href=".">Manual</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#description">DESCRIPTION</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#building-from-source">BUILDING FROM SOURCE</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-resources">Example Resources</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#validation">Validation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#unit-tests">Unit tests</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#diy">DIY</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="arch/">⇒ DANS Data Station Architecture</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">dans-schema</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" alt="Docs"></a> &raquo;</li><li>Manual</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/DANS-KNAW/dans-schema/edit/master/docs/index.md"> Edit on DANS-KNAW/dans-schema</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="dans-schema">dans-schema<a class="headerlink" href="#dans-schema" title="Permanent link">&para;</a></h1>
<p>DANS XML schemas</p>
<h2 id="description">DESCRIPTION<a class="headerlink" href="#description" title="Permanent link">&para;</a></h2>
<p>The <a href="https://dans-knaw.github.io/dans-bagit-profile/versions/1.2.0/" target="_blank">DANS BagIt Profile v1</a> requires several XML metadata files. This project includes the XML schema files to validate those XML files. These
schemas will be published on a public website. <!-- TODO: change text to point to website when it is up --> Alternatively you can
<a href="#building-from-source">clone and build this project</a> which will package site up both as a jar-file and as an RPM.</p>
<div class="admonition warning">
<p class="admonition-title">DANS Schema vs EASY Schema</p>
<p>DANS Schema contains the schemas for the Data Stations. It is forked from the legacy project <a href="https://github.com/DANS-KNAW/easy-schema" target="_blank">easy-schema</a> which will be phased out with 
EASY itself. </p>
</div>
<h2 id="building-from-source">BUILDING FROM SOURCE<a class="headerlink" href="#building-from-source" title="Permanent link">&para;</a></h2>
<p>Prerequisites:</p>
<ul>
<li>Java 11 or higher</li>
<li>Maven 3.3.3 or higher</li>
<li>RPM</li>
</ul>
<p>Steps:</p>
<pre class="codehilite"><code>git clone https://github.com/DANS-KNAW/dans-schema.git
cd dans-schema 
mvn clean install
</code></pre>

<p>If the <code>rpm</code> executable is found at <code>/usr/local/bin/rpm</code>, the build profile that includes the RPM packaging will be activated. If <code>rpm</code> is available, but at a
different path, then activate it by using Maven's <code>-P</code> switch: <code>mvn -Prpm install</code>.</p>
<h2 id="example-resources">Example Resources<a class="headerlink" href="#example-resources" title="Permanent link">&para;</a></h2>
<p>The example resources directory <code>lib/src/test/resources</code> has a number of XML files that can be used
to become more familiar with the XML formats used by the DANS services.</p>
<p>The <a href="https://github.com/DANS-KNAW/dans-bagit-profile/blob/master/docs/versions/1.0.0.md#dans-bagit-profile-v0">DANS bag</a> documentation provides best practices for <a href="https://github.com/DANS-KNAW/dans-bagit-profile/blob/master/docs/versions/0.0.0.md#xml-namespaces">namespace prefixes</a>.
Note that actual practice also uses <code>dct</code> for <code>dcterms</code>.</p>
<p>The table maps formats to files in a bag.</p>
<table>
<thead>
<tr>
<th>XSD</th>
<th>file in DANS V1 bag</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ddm</code></td>
<td><code>metadata/dataset.xml</code></td>
</tr>
<tr>
<td><code>files</code></td>
<td><code>metadata/files.xml</code></td>
</tr>
</tbody>
</table>
<p>Examples for XSDs that are not in the table above may be standalone,
or embedded within examples for XSDs from the table.
The namespace URI of the root element in the examples should match the
<code>targetNamespace</code> of the schema to validate the example.</p>
<pre class="codehilite"><code>├── bag/metadata
│   ├── agreements/agreements
│   └── files/files
├── dcx
│   ├── dcx-dai
│   └── dcx-gml
└── md/ddm
    ├── v1/ddm
    └── v2/ddm
</code></pre>

<h2 id="validation">Validation<a class="headerlink" href="#validation" title="Permanent link">&para;</a></h2>
<h3 id="unit-tests">Unit tests<a class="headerlink" href="#unit-tests" title="Permanent link">&para;</a></h3>
<ul>
<li><code>ValidateXsdFilesTest</code> shows that the provided XSDs are valid.</li>
<li><code>ValidateXmlFilesTest</code> shows that the provided examples are valid.<br />
  Directories in <code>lib/src/test/resources</code> should match with XSD files in the <code>lib/src/main/resources</code> directory.</li>
<li><code>DdmVersionChangesTest</code> documents the effect of the differences between V1 and V2 of the DDM schemas.</li>
</ul>
<h3 id="diy">DIY<a class="headerlink" href="#diy" title="Permanent link">&para;</a></h3>
<p>Various online and offline tools can validate an XML file against an XSD schema.
They may silently ignore problems with loading 3rd party schemas referenced by the main schema.
This can cause error messages like:</p>
<pre class="codehilite"><code>Cannot resolve the name 'xml:lang' to a(n) 'element declaration' component
</code></pre>

<p>Some loading problems might be caused by services refusing the default
<code>User-Agent</code> header that is sent with the request to fetch the XSD.
A system property for Java applications can override the default value,
for example with a command line argument:</p>
<pre class="codehilite"><code>-Dhttp.agent=something/1.0
</code></pre>

<p>Below an example to write your own validator in Java.
It silently ignores loading problems of 3rd party schemas.</p>
<pre class="codehilite"><code class="language-java">import org.xml.sax.SAXException;

import javax.xml.XMLConstants;
import javax.xml.transform.stream.StreamSource;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.URL;

import static javax.xml.validation.SchemaFactory.newInstance;

public class Validate {

  public static void main(String[] args) throws IOException, SAXException {
    System.setProperty(&quot;http.agent&quot;, &quot;Test&quot;);
    String xsd = &quot; https://easy.dans.knaw.nl/schemas/dcx/2020/03/dcx-dai.xsd&quot;;
    String xml = &quot;src/main/resources/examples/dcx-dai/example2.xml&quot;;
    newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI)
        .newSchema(new URL(xsd))
        .newValidator()
        .validate(new StreamSource(new FileInputStream(xml)));
  }
}
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="arch/" class="btn btn-neutral float-right" title="⇒ DANS Data Station Architecture">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="arch/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.3.0
Build Date UTC : 2025-08-29 07:24:37.268166+00:00
-->
